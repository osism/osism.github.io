"use strict";(self.webpackChunkosism=self.webpackChunkosism||[]).push([[289],{1662:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>c});var i=s(5893),r=s(1151);const t={sidebar_label:"OSISM 7"},o="OSISM 7",a={id:"release-notes/osism-7",title:"OSISM 7",description:"Instructions for the upgrade can be found in the Upgrade Guide.",source:"@site/docs/release-notes/osism-7.md",sourceDirName:"release-notes",slug:"/release-notes/osism-7",permalink:"/docs/release-notes/osism-7",draft:!1,unlisted:!1,editUrl:"https://github.com/osism/osism.github.io/tree/main/docs/release-notes/osism-7.md",tags:[],version:"current",frontMatter:{sidebar_label:"OSISM 7"},sidebar:"tutorialSidebar",previous:{title:"Release Notes",permalink:"/docs/release-notes/"},next:{title:"Appendix",permalink:"/docs/appendix/"}},l={},c=[{value:"7.0.3",id:"703",level:2},{value:"7.0.2",id:"702",level:2},{value:"7.0.1",id:"701",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"osism-7",children:"OSISM 7"}),"\n",(0,i.jsxs)(n.p,{children:["Instructions for the upgrade can be found in the ",(0,i.jsx)(n.a,{href:"https://osism.github.io/docs/guides/upgrade-guide/manager",children:"Upgrade Guide"}),"."]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"7.0.0a, 7.0.0b, 7.0.0c, 7.0.0d are pre-releases. Do not use these releases."})}),"\n",(0,i.jsx)(n.h2,{id:"703",children:"7.0.3"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Release date: 3. May 2024"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The Ceph service images have not been rebuilt. No upgrade of Ceph is required."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The OpenStack service images for Octavia and Nova have been rebuilt. Upgrades of the Octavia\nand Nova services are recommended. No upgrades of other OpenStack and associated\ninfrastructure services such as MariaDB or RabbitMQ are required."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The Nova images have been rebuilt to add packages to be able to use vTMP (",(0,i.jsx)(n.a,{href:"https://github.com/osism/issues/issues/1008%3E",children:"osism/issues#1008"}),")\nIf this is not relevant, the upgrade can be skipped."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The octavia images have been rebuilt to resolve an issue when creating a LB + a listener\nwith an allowed_cidr with the fully-populated API (",(0,i.jsx)(n.a,{href:"https://github.com/osism/issues/issues/980%3E",children:"osism/issues#980"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["During the preparation of the upgrades of the regions of the PCO a bug (",(0,i.jsx)(n.a,{href:"https://github.com/osism/issues/issues/973%3E",children:"osism/issues#937"}),")\nhas been noticed which leads to a delay of up to 2 minutes between the necessary container stops and starts.\nThis is due to a bug in the service units of all Kolla services. The bug is fixed in the current release.\nTo avoid the delay during an upgrade, a fix must be applied in advance for all  srvice units from\nKolla."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"osism apply fix-gh937\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Kubernetes Cluster API for the 1.30 series is available. They are now provided directly with\n",(0,i.jsx)(n.code,{children:"osism manage image clusterapi"}),". This means that Kubernetes Cluster API images are now available\nfor series 1.27, 1.28, 1.29 and 1.30."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["A new role ",(0,i.jsx)(n.code,{children:"tempest"})," has been added to the Ansible collection ",(0,i.jsx)(n.code,{children:"osism.validations"}),". This makes it possible\nto perform significantly more tests than with the previously used ",(0,i.jsx)(n.code,{children:"osism.validations.refstack"})," role. The new\nrole will be used in the testbed in future to significantly increase the number of tests performed in the CI."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["New documentation for the ",(0,i.jsx)(n.a,{href:"https://osism.tech/docs/guides/operations-guide/openstack/day2-operations/project-manager",children:"project manager"}),"\nand the ",(0,i.jsx)(n.a,{href:"https://osism.tech/docs/guides/operations-guide/openstack/day2-operations/simple-stress",children:"simple stress"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["When using the reboot play, it is now possible to wait for the reboot to be completed (",(0,i.jsx)(n.a,{href:"https://github.com/osism/issues/issues/758",children:"osism/issues#758"}),")."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"osism apply reboot \\\n  -e reboot_wait=yes \\\n  -e ireallymeanit=yes\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Monitoring services are now activated by default for the internal Kubernetes cluster."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"openstack_cacert"})," parameter used by Kolla is now set to ",(0,i.jsx)(n.code,{children:'"/etc/ssl/certs/ca-certificates.crt"'}),"\nby default. The previous default was ",(0,i.jsx)(n.code,{children:'""'}),". If this is not wanted, the parameter must be overwritten in\n",(0,i.jsx)(n.code,{children:"environments/kolla/configuration.yml"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"ironic_agent_files_directory"})," parameter used by Kolla is now set to ",(0,i.jsx)(n.code,{children:"/share/ironic"})," by default.\nThe previous default was ",(0,i.jsx)(n.code,{children:'"{{ node_custom_config }}"'}),". If this is not wanted, the parameter must be overwritten\nin ",(0,i.jsx)(n.code,{children:"environments/kolla/configuration.yml"}),". This is in preparation for the Ironic IPA images no longer being\nstored in the configuration repository but within the manager service at runtime."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The Ironic IPA images are now downloaded from ironic play by default. If this is not wanted,\n",(0,i.jsx)(n.code,{children:"enable_ironic_agent_download_images: false"})," must be set in ",(0,i.jsx)(n.code,{children:"environments/kolla/configuration.yml"}),".\nThe Ironic IPA images can now also be downloaded independently of the ironic play with ",(0,i.jsx)(n.code,{children:"osism apply ironic-download-ipa-images"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"ceph_cluster_fsid"})," parameter is now generated automatically. It can be removed from ",(0,i.jsx)(n.code,{children:"environments/configuration.yml"}),".\nThe automatically generated ",(0,i.jsx)(n.code,{children:"ceph_clusterfs_fsid"})," parameter is set to the value of the ",(0,i.jsx)(n.code,{children:"fsid"}),"\nparameter from ",(0,i.jsx)(n.code,{children:"environments/ceph/configuration.yml"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["You can now use your own hook scripts in ",(0,i.jsx)(n.code,{children:"osism/cfg-cookiecutter"}),". These are placed in the directory\n",(0,i.jsx)(n.code,{children:"{{cookiecutter.project_name}}/scripts.d/"})," directory. The scripts are executed in alphabetical order.\nThe scripts must be executable."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Versions not yet pinned in the manager environment of the configuration repository (Ansible collections, ",(0,i.jsx)(n.code,{children:"osism/cfg-generics"}),", ..)\nare now automatically pinned during synchronisation with ",(0,i.jsx)(n.code,{children:"gilt overlay"}),". This also applies to the\n",(0,i.jsx)(n.code,{children:"osism update manager"})," script."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The Docker version and the Docker CLI version can now also be managed via ",(0,i.jsx)(n.code,{children:"osism/cfg-generics"}),".\nIt is recommended to pin the Docker version in ",(0,i.jsx)(n.code,{children:"environments/configuration.yml"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"docker_version: '5:24.0.9'\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["When using the single service plays for Ceph (",(0,i.jsx)(n.code,{children:"ceph-osds"}),", ",(0,i.jsx)(n.code,{children:"ceph-mons"}),", ..), no service restarts\nare executed for other services. This can be adjusted with the ",(0,i.jsx)(n.code,{children:"ceph_handler_*_restart"})," parameters.\nThe default value is ",(0,i.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"ceph_handler_crash_restart\nceph_handler_mdss_restart\nceph_handler_mgrs_restart\nceph_handler_mons_restart\nceph_handler_osds_restart\nceph_handler_rbdmirrors_restart\nceph_handler_rgws_restart\n"})}),"\n",(0,i.jsx)(n.p,{children:"The following example now makes it possible when adding new OSDs to really only start the OSDs that\nhave been newly added and to avoid a restart of all OSDs in the cluster or on a node."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"osism apply ceph-osds -e ceph_handler_osds_restart=False\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The restart of Ceph Services is now throttled. By default, only one Ceph service is restarted at a time.\nThis can be adjusted with the ",(0,i.jsx)(n.code,{children:"ceph_handler_*_restart_throttle"})," parameters. The default value is ",(0,i.jsx)(n.code,{children:"1"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"ceph_handler_crash_restart_throttle\nceph_handler_mdss_restart_throttle\nceph_handler_mgrs_restart_throttle\nceph_handler_mons_restart_throttle\nceph_handler_osds_restart_throttle\nceph_handler_rbdmirrors_restart_throttle\nceph_handler_rgws_restart_throttle\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["OVN container images will be built without the ",(0,i.jsx)(n.code,{children:"-march=broadwell"})," parameter in the future. The OVN\nimages have not been updated with this release, this only serves as an announcement for the future. By\nremoving the parameter, it is possible to use the OVN container images on older CPUs. It is planned to\nprovide different variants of the OVN and OVS container images in the future to enable parameters for\nmodern CPUs in order to improve performance in particular."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"This has nothing to do with the release itself and is just a notice. The build of the OpenStack Zed images has been\ndisabled."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"702",children:"7.0.2"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Release date: 17. April 2024"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The Ceph & OpenStack service images have not been rebuilt. No upgrades of Ceph & OpenStack and associated\ninfrastructure services such as MariaDB or RabbitMQ are required."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Properties for device type ",(0,i.jsx)(n.code,{children:"vrfs"})," are now supported in the ",(0,i.jsx)(n.code,{children:"osism.commons.network"})," role."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Debian support in ",(0,i.jsx)(n.code,{children:"osism.commons"})," & ",(0,i.jsx)(n.code,{children:"osism.services"})," Ansible collection."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The roles of the ",(0,i.jsx)(n.code,{children:"osism.commons"})," collection are now usable with Debian. The roles have been tested with Debian Bookworm."]}),"\n",(0,i.jsxs)(n.li,{children:["The roles of the ",(0,i.jsx)(n.code,{children:"osism.services"})," collection are now usable with Debian. The roles have been tested with Debian Bookworm."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"If the OSISM CLI is executed as root user there is now an informal warning message."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Use a single network for Ceph frontend & backend in the cookiecutter. More information in the\n",(0,i.jsx)(n.a,{href:"https://docs.ceph.com/en/latest/rados/configuration/network-config-ref/",children:"Ceph network configuration reference"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"When synchronising the configuration repository, it is now ensured that you are on the correct branch."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Senlin images available again as rolling tag for OpenStack 2023.2."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Zun images available again as rolling tag for OpenStack 2023.2 & 2024.1."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"New FRR configuration template for loadbalancers with an external uplink in the osism.services.frr role."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"scs:name-v1"})," and ",(0,i.jsx)(n.code,{children:"scs:name-v2"})," extra specs are now set via the OpenStack flavor manager."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Task ID is now displayed in the output of the OSISM CLI for prepared tasks."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["New Makefile target in the OSISM Testbed to fetch the Wireguard configuration file: ",(0,i.jsx)(n.code,{children:"vpn-wireguard-config"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["With the play ",(0,i.jsx)(n.code,{children:"noop"})," it is now possible to run a play with noop. This is useful for testing purposes of the manager service."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The stable repository is now used as the default for the Netdata service in the ",(0,i.jsx)(n.code,{children:"osism.services.netdata"})," role. This avoids\npackage conflicts in future."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"701",children:"7.0.1"})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>a,a:()=>o});var i=s(7294);const r={},t=i.createContext(r);function o(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);