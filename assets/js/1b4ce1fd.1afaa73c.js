"use strict";(globalThis.webpackChunkosism=globalThis.webpackChunkosism||[]).push([[6281],{8720(e,t,i){i.r(t),i.d(t,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"appendix/security/ossa-2026-002","title":"OSSA-2026-002: Nova calls qemu-img without format restrictions for resize","description":"| Property         | Value                                                             |","source":"@site/docs/appendix/security/ossa-2026-002.md","sourceDirName":"appendix/security","slug":"/appendix/security/ossa-2026-002","permalink":"/docs/appendix/security/ossa-2026-002","draft":false,"unlisted":false,"editUrl":"https://github.com/osism/osism.github.io/tree/main/docs/appendix/security/ossa-2026-002.md","tags":[],"version":"current","frontMatter":{"sidebar_label":"OSSA-2026-002"},"sidebar":"tutorialSidebar","previous":{"title":"OSSA-2026-001","permalink":"/docs/appendix/security/ossa-2026-001"},"next":{"title":"References","permalink":"/docs/appendix/references/"}}');var s=i(4848),r=i(8453);const l={sidebar_label:"OSSA-2026-002"},o="OSSA-2026-002: Nova calls qemu-img without format restrictions for resize",a={},c=[{value:"Summary",id:"summary",level:2},{value:"Affected Versions",id:"affected-versions",level:2},{value:"Impact on OSISM",id:"impact-on-osism",level:2},{value:"How to Check if You Are Affected",id:"how-to-check-if-you-are-affected",level:3},{value:"Check in the Configuration Repository",id:"check-in-the-configuration-repository",level:4},{value:"Check on the Running Deployment",id:"check-on-the-running-deployment",level:4},{value:"Vulnerability Details",id:"vulnerability-details",level:2},{value:"Remediation",id:"remediation",level:2},{value:"For OSISM Releases",id:"for-osism-releases",level:3},{value:"Mitigation",id:"mitigation",level:3},{value:"References",id:"references",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"ossa-2026-002-nova-calls-qemu-img-without-format-restrictions-for-resize",children:"OSSA-2026-002: Nova calls qemu-img without format restrictions for resize"})}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Property"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Value"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Date"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"2026-02-17"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"CVE"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:(0,s.jsx)(t.a,{href:"https://www.cve.org/CVERecord?id=CVE-2026-24709",children:"CVE-2026-24709"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Severity"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"High"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Affected Project"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Nova"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Reporter"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Dan Smith (Red Hat)"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsxs)(t.p,{children:["A vulnerability was discovered in OpenStack Nova where malicious QCOW headers written to root\nor ephemeral disks can trigger unsafe resize operations. When a resize is initiated, Nova's flat\nimage backend calls ",(0,s.jsx)(t.code,{children:"qemu-img"})," without a format restriction, enabling potential data destruction\non host systems. Only systems using the flat image backend (typically with ",(0,s.jsx)(t.code,{children:"use_cow_images=False"}),")\nare affected."]}),"\n",(0,s.jsx)(t.h2,{id:"affected-versions",children:"Affected Versions"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Nova Version"}),(0,s.jsx)(t.th,{style:{textAlign:"left"},children:"Status"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"< 30.2.2"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Vulnerable"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:">= 31.0.0, < 31.2.1"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Vulnerable"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:">= 32.0.0, < 32.1.1"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Vulnerable"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:">= 30.2.2 (Dalmatian)"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Fixed"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:">= 31.2.1 (Epoxy)"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Fixed"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:">= 32.1.1 (Flamingo)"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Fixed"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"left"},children:">= 33.0.0 (Gazpacho)"}),(0,s.jsx)(t.td,{style:{textAlign:"left"},children:"Fixed"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"impact-on-osism",children:"Impact on OSISM"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsxs)(t.strong,{children:["This vulnerability only affects OSISM deployments that use the flat image backend with\n",(0,s.jsx)(t.code,{children:"use_cow_images=False"})," for the Nova compute service."]})," Standard OSISM deployments use the\ndefault configuration with COW images (",(0,s.jsx)(t.code,{children:"use_cow_images=True"}),") and are ",(0,s.jsx)(t.strong,{children:"not affected"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"You are potentially affected if:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["You have explicitly set ",(0,s.jsx)(t.code,{children:"use_cow_images=False"})," in your Nova compute configuration"]}),"\n",(0,s.jsx)(t.li,{children:"You are using the flat image backend for instance disks"}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"how-to-check-if-you-are-affected",children:"How to Check if You Are Affected"}),"\n",(0,s.jsx)(t.h4,{id:"check-in-the-configuration-repository",children:"Check in the Configuration Repository"}),"\n",(0,s.jsxs)(t.p,{children:["In OSISM, custom Nova configurations are managed in the configuration repository. Check if\n",(0,s.jsx)(t.code,{children:"use_cow_images"})," has been set to ",(0,s.jsx)(t.code,{children:"False"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'# In your configuration repository\ngrep -r "use_cow_images" environments/kolla\n'})}),"\n",(0,s.jsxs)(t.p,{children:["If no results are returned or the value is set to ",(0,s.jsx)(t.code,{children:"True"}),", your deployment is ",(0,s.jsx)(t.strong,{children:"not affected"}),"."]}),"\n",(0,s.jsx)(t.h4,{id:"check-on-the-running-deployment",children:"Check on the Running Deployment"}),"\n",(0,s.jsx)(t.p,{children:"Alternatively, check directly on a compute node:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'docker exec nova_compute grep "use_cow_images" /etc/nova/nova.conf\n'})}),"\n",(0,s.jsxs)(t.p,{children:["If no results are returned or the value is ",(0,s.jsx)(t.code,{children:"True"})," (the default), your deployment is\n",(0,s.jsx)(t.strong,{children:"not affected"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"vulnerability-details",children:"Vulnerability Details"}),"\n",(0,s.jsxs)(t.p,{children:["When a user initiates a resize (or migration) of an instance, Nova's flat image backend calls\n",(0,s.jsx)(t.code,{children:"qemu-img"})," to process the disk images. The vulnerability arises because ",(0,s.jsx)(t.code,{children:"qemu-img"})," is invoked\nwithout restricting the expected image format. An attacker with access to an instance could write\nmalicious QCOW headers to a root or ephemeral disk. During a subsequent resize operation, the\ncrafted headers could cause ",(0,s.jsx)(t.code,{children:"qemu-img"})," to misinterpret the disk contents, potentially leading to\ndata destruction on the host system."]}),"\n",(0,s.jsx)(t.h2,{id:"remediation",children:"Remediation"}),"\n",(0,s.jsx)(t.h3,{id:"for-osism-releases",children:"For OSISM Releases"}),"\n",(0,s.jsxs)(t.p,{children:["A fix will be included in upcoming OSISM releases that ship a patched Nova version. Consult the\n",(0,s.jsx)(t.a,{href:"../../release-notes/",children:"OSISM Release Notes"})," for version information and availability."]}),"\n",(0,s.jsxs)(t.p,{children:["Alternatively, you can use rolling tags to override the Nova container images with versions\nthat include the fix. Configure the following in ",(0,s.jsx)(t.code,{children:"environments/kolla/images.yml"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:'nova_tag: "2024.2"  # or "2025.1", depending on your OpenStack release\n'})}),"\n",(0,s.jsx)(t.h3,{id:"mitigation",children:"Mitigation"}),"\n",(0,s.jsxs)(t.p,{children:["If you are using the flat image backend with ",(0,s.jsx)(t.code,{children:"use_cow_images=False"}),", consider the following\nmeasures:"]}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["Switching to the default COW image backend by setting ",(0,s.jsx)(t.code,{children:"use_cow_images=True"})]}),"\n",(0,s.jsx)(t.li,{children:"Restricting the ability to resize or migrate instances to trusted administrators"}),"\n",(0,s.jsx)(t.li,{children:"Monitoring for unusual resize or migration operations"}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"references",children:"References"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://security.openstack.org/ossa/OSSA-2026-002.html",children:"OSSA-2026-002 Advisory"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://review.opendev.org/977104",children:"OpenDev Review (Fix - Dalmatian)"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://review.opendev.org/977103",children:"OpenDev Review (Fix - Epoxy)"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://review.opendev.org/977101",children:"OpenDev Review (Fix - Flamingo)"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://review.opendev.org/977100",children:"OpenDev Review (Fix - Gazpacho)"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://bugs.launchpad.net/nova/+bug/2137507",children:"Launchpad Bug #2137507"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"https://www.cve.org/CVERecord?id=CVE-2026-24709",children:"CVE-2026-24709"})}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453(e,t,i){i.d(t,{R:()=>l,x:()=>o});var n=i(6540);const s={},r=n.createContext(s);function l(e){const t=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);