"use strict";(self.webpackChunkosism=self.webpackChunkosism||[]).push([[4366],{4607:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>o});var n=s(5893),l=s(1151);const i={sidebar_label:"Testbed Guide"},d="Testbed",r={id:"guides/other-guides/testbed",title:"Testbed",description:"\ud83d\udca1 With the OSISM Testbed, it is possible to run a full Sovereign Cloud Stack",source:"@site/docs/guides/other-guides/testbed.md",sourceDirName:"guides/other-guides",slug:"/guides/other-guides/testbed",permalink:"/de/docs/guides/other-guides/testbed",draft:!1,unlisted:!1,editUrl:"https://github.com/osism/osism.github.io/tree/main/docs/guides/other-guides/testbed.md",tags:[],version:"current",frontMatter:{sidebar_label:"Testbed Guide"},sidebar:"tutorialSidebar",previous:{title:"Style Guide",permalink:"/de/docs/guides/other-guides/style-guide"},next:{title:"Zuul CI",permalink:"/de/docs/guides/other-guides/zuul"}},c={},o=[{value:"Requirements",id:"requirements",level:2},{value:"Cloud access",id:"cloud-access",level:3},{value:"Cloud resources",id:"cloud-resources",level:3},{value:"Preparations",id:"preparations",level:2},{value:"Software",id:"software",level:3},{value:"Custom CA",id:"custom-ca",level:3},{value:"Getting Started",id:"getting-started",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Variables",id:"variables",level:3},{value:"Overrides",id:"overrides",level:3},{value:"Customisations",id:"customisations",level:3},{value:"Usage of the the Testbed",id:"usage-of-the-the-testbed",level:2},{value:"VPN access",id:"vpn-access",level:3},{value:"Webinterfaces",id:"webinterfaces",level:3},{value:"Authentication with OIDC",id:"authentication-with-oidc",level:3},{value:"OpenStack web dashboard (Horizon) login via OIDC",id:"openstack-web-dashboard-horizon-login-via-oidc",level:4},{value:"OpenStack web dashboard (Horizon) logout",id:"openstack-web-dashboard-horizon-logout",level:4},{value:"Usage of the Openstack CLI",id:"usage-of-the-openstack-cli",level:4},{value:"OpenStack CLI operations with OpenID Connect password",id:"openstack-cli-operations-with-openid-connect-password",level:4},{value:"OpenStack CLI token issue with OpenID Connect",id:"openstack-cli-token-issue-with-openid-connect",level:4},{value:"Advanced Usage",id:"advanced-usage",level:2},{value:"Change versions",id:"change-versions",level:3},{value:"Deploy services",id:"deploy-services",level:3},{value:"Upgrade services",id:"upgrade-services",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Unsupported locale setting",id:"unsupported-locale-setting",level:3},{value:"Notes",id:"notes",level:2},{value:"Appendix",id:"appendix",level:2},{value:"Supported releases",id:"supported-releases",level:3},{value:"Included services",id:"included-services",level:3},{value:"Infrastructure",id:"infrastructure",level:4},{value:"OpenStack",id:"openstack",level:4},{value:"Makefile reference",id:"makefile-reference",level:3},{value:"CI jobs",id:"ci-jobs",level:3}];function a(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"testbed",children:"Testbed"}),"\n",(0,n.jsx)(t.p,{children:"\ud83d\udca1 With the OSISM Testbed, it is possible to run a full Sovereign Cloud Stack\ndeployment on an existing OpenStack environment such as Cleura or REGIO.cloud."}),"\n",(0,n.jsxs)(t.p,{children:["OSISM is the reference implementation for the infrastructure as a service layer in the\n",(0,n.jsx)(t.a,{href:"https://scs.community",children:"Sovereign Cloud Stack"})," (SCS) project. The OSISM Testbed is therefore\nused in the SCS project to test and work on the Instrastructure as a Service layer."]}),"\n",(0,n.jsx)(t.p,{children:"The OSISM Testbed is intended as a playground. Further services and integration will\nbe added over time. A increasing number of best practices and experiences from the productive\ndeployments will be included here in the future. It will become more production-like\nover time. However, at no point does it claim to represent a production setup exactly."}),"\n",(0,n.jsx)(t.h2,{id:"requirements",children:"Requirements"}),"\n",(0,n.jsx)(t.h3,{id:"cloud-access",children:"Cloud access"}),"\n",(0,n.jsx)(t.p,{children:"The usual prerequisite is to have an account on one of the supported OpenStack cloud providers."}),"\n",(0,n.jsx)(t.p,{children:"In principle, it is also possible to add further environments on which the testbed can be operated\nwith manageable effort: Virtual machines, network and storage based on OpenStack are used as the basis or to\nprovide the testbed. As OSISM/SCS also virtualizes systems itself, the OpenStack environment must provide\nthe capabilities for nested virtualization."}),"\n",(0,n.jsx)(t.p,{children:"It is not part of this guide to describe the registration with the individual cloud\nproviders. Please contact the respective cloud provider for this."}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Product"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Provider"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Profile name"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Cleura"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Cleura"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"cleura"})})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Fuga Cloud"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"FUGA"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"fuga"})})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"HuaweiCloud"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"HuaweiCloud"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"huaweicloud"})})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"OVH"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"OVH"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"ovh"})})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"OpenTelekomCloud"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"T-Systems"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"otc"})})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"pluscloud open"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"plusserver"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"pluscloudopen"})})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"pluscloud SCS Test"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"plussserver"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"gx-scs"})})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"REGIO.cloud"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"OSISM"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"regiocloud"})})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Wavestack"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"noris network"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"wavestack"})})]})]})]}),"\n",(0,n.jsxs)(t.p,{children:["For each provider listed in the table, a predefined profile is available in the\n",(0,n.jsx)(t.code,{children:"terraform/environments"})," directory. This profile contains the name of the public\nnetwork, which flavors to use, etc."]}),"\n",(0,n.jsx)(t.p,{children:"Here is an example from the profile for REGIO.cloud."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-text",children:'flavor_manager            = "SCS-4V-16-50"\nflavor_node               = "SCS-8V-32-50"\nvolume_type               = "ssd"\nimage                     = "Ubuntu 22.04"\nimage_node                = "Ubuntu 22.04"\npublic                    = "public"\navailability_zone         = "nova"\nvolume_availability_zone  = "nova"\nnetwork_availability_zone = "nova"\n'})}),"\n",(0,n.jsx)(t.h3,{id:"cloud-resources",children:"Cloud resources"}),"\n",(0,n.jsx)(t.p,{children:"The OSISM Testbed requires at least the following project quota when using the default flavors:"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Quantity"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Resource"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Note"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"4"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Instances"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"28 VCPUs + 112 GByte RAM (3 modes, 1 manager)"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"9"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Volumes"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"90 GByte volume storage"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Floating IP"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Keypair"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"3"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Security group"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"16"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Security group rules"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Network"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Subetwork"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"6"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Ports"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"1"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Router"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:"preparations",children:"Preparations"}),"\n",(0,n.jsx)(t.h3,{id:"software",children:"Software"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"make"})," must be installed on the system"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"wireguard"})," or ",(0,n.jsx)(t.code,{children:"sshuttle"})," must be installed on your system for vpn access"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"virtualenv"})," must be installed for managing python dependencies like ",(0,n.jsx)(t.code,{children:"ansible"})]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"custom-ca",children:"Custom CA"}),"\n",(0,n.jsxs)(t.p,{children:["The OSISM Testbed installation currently uses hostnames in the domain ",(0,n.jsx)(t.code,{children:"testbed.osism.xyz"}),".  This is a real domain\nand we provide the DNS records matching the addresses used in the OSISM Testbed, so that once you connect to your testbed via a direct\nlink or Wireguard, you can access hosts and servers by their hostname (e.g. ",(0,n.jsx)(t.code,{children:"ssh testbed-manager.testbed.osism.xyz"}),")."]}),"\n",(0,n.jsxs)(t.p,{children:["We also provide a wildcard TLS certificate signed by a custom CA for ",(0,n.jsx)(t.code,{children:"testbed.osism.xyz"})," and ",(0,n.jsx)(t.code,{children:"*.testbed.osism.xyz"}),"."]}),"\n",(0,n.jsx)(t.p,{children:"This CA is always used for each testbed. The CA is not regenerated and it is not planned to change this for the next 10 years."}),"\n",(0,n.jsxs)(t.p,{children:["In order for these certificates to be recognized locally as valid, the CA\n",(0,n.jsx)(t.a,{href:"https://raw.githubusercontent.com/osism/testbed/main/environments/kolla/certificates/ca/testbed.crt",children:"environments/kolla/certificates/ca/testbed.crt"}),"\nmust be imported locally."]}),"\n",(0,n.jsx)(t.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,n.jsx)(t.p,{children:"This section describes step by step how to deploy the OSISM Testbed."}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Request access from the administrator of the respective cloud or get access to an Openstack cloud."}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Clone the ",(0,n.jsx)(t.a,{href:"https://github.com/osism/testbed",children:"osism/testbed"})," repository.\nThe repository can also be cloned to any other location."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sh",children:"mkdir -p ~/src/github.com/osism\ngit clone https://github.com/osism/testbed ~/src/github.com/osism/testbed\ncd ~/src/github.com/osism/testbed\n"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Configure your cloud access profile\nThe access data for the cloud provider used is stored in ",(0,n.jsx)(t.code,{children:"terraform/clouds.yaml"})," and optionally\nin ",(0,n.jsx)(t.code,{children:"terraform/secure.yaml"})," (same structure, if you want to store credentials on a separate place).\nIn file ",(0,n.jsx)(t.a,{href:"https://github.com/osism/testbed/blob/main/terraform/clouds.yaml.sample",children:"terraform/clouds.yaml.sample"}),"\nyou will find examples of typical setups. Settings that are identical for all users of a cloud can be defined\ncentrally via the profiles of the file\n",(0,n.jsx)(t.a,{href:"https://github.com/osism/testbed/blob/main/terraform/clouds-public.yaml",children:"terraform/clouds-public.yaml"}),".\nYou can reference these settings by using the ",(0,n.jsx)(t.code,{children:"profile"})," parameter in cloud-specific\ndefinition in ",(0,n.jsx)(t.code,{children:"terraform/clouds.yaml"}),".\nThe user specific settings of the ",(0,n.jsx)(t.code,{children:"clouds.yaml"})," file are provided by the cloud provider. Please check the\ndocumentation  of the cloud provider you are using or their support for details."]}),"\n",(0,n.jsxs)(t.p,{children:["REGIO.cloud is used as an example. The cloud name in ",(0,n.jsx)(t.code,{children:"clouds.yaml"}),"\nand the environment name (value of ",(0,n.jsx)(t.code,{children:"ENVIRONMENT"}),") are ",(0,n.jsx)(t.code,{children:"regiocloud"})," in this case. If another cloud\nis used, replace ",(0,n.jsx)(t.code,{children:"regiocloud"})," with the respective profile name from the table above."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-yaml",children:"clouds:\n  regiocloud:\n    profile: regiocloud\n    auth:\n      project_name: PROJECT\n      username: USERNAME\n      project_domain_name: DOMAIN\n      user_domain_name: DOMAIN\n"})}),"\n",(0,n.jsxs)(t.p,{children:["The use of application credentials is preferred. This way it is not necessary to store\ndetails like username or project name or sensitive information like the password in the\n",(0,n.jsx)(t.code,{children:"clouds.yaml"})," file."]}),"\n",(0,n.jsxs)(t.p,{children:["The application credentials can be found in Horizon under ",(0,n.jsx)(t.strong,{children:"Identity"}),". Use ",(0,n.jsx)(t.code,{children:"OSISM testbed"})," as\nname and click ",(0,n.jsx)(t.code,{children:"Create Application Credential"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"clouds.yaml"})," file of REGIO.cloud can be used as an example for the use of\napplication credentials. With another cloud provider, only the ",(0,n.jsx)(t.code,{children:"auth_url"})," must then be changed\naccordingly."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-yaml",children:'clouds:\n  regiocloud:\n    auth:\n      application_credential_id: ID\n      application_credential_secret: SECRET\n    auth_type: "v3applicationcredential"\n'})}),"\n",(0,n.jsxs)(t.p,{children:["If you want to make use of ",(0,n.jsx)(t.code,{children:"terraform/secure.yaml"})," add your secrets there instead of ",(0,n.jsx)(t.code,{children:"clouds.yaml"}),", e.g:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-yaml",children:"clouds:\n  regiocloud:\n    auth:\n      password: PASSWORD\n"})}),"\n",(0,n.jsx)(t.p,{children:"or"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-yaml",children:"clouds:\n  regiocloud:\n    auth:\n      application_credential_secret: SECRET\n"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Prepare the deployment. The versions of Ansible and OpenTofu are managed automatically and necessary\ndependencies are cloned."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sh",children:"make prepare\n"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Create the infrastructure with OpenTofu."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sh",children:"make ENVIRONMENT=regiocloud create\n"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Deploy the OSISM manager and bootstrap all nodes."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sh",children:"make ENVIRONMENT=regiocloud manager\n"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"Deploy all services. Depending on the cloud, the installation will take some time. Up\nto two hours is not unusual. In this step, Ceph, OpenStack and all necessary\ninfrastructure services (MariaDB, RabbitMQ, ...) are deployed."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sh",children:"make ENVIRONMENT=regiocloud deploy\n"})}),"\n",(0,n.jsxs)(t.p,{children:["Alternatively, it is also possible to deploy the services step by step directly on the\nmanager. To do this, first log in to the manager with ",(0,n.jsx)(t.code,{children:"make ENVIRONMENT=regiocloud login"}),"\nand then execute the deploy scripts one after the other. It is recommended to do this\nwithin a screen session."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sh",children:"/opt/configuration/scripts/deploy/001-helper-services.sh\n/opt/configuration/scripts/deploy/100-ceph-services-basic.sh\n/opt/configuration/scripts/deploy/200-infrastructure-services-basic.sh\n/opt/configuration/scripts/deploy/300-openstack-services-basic.sh\n/opt/configuration/scripts/deploy/400-monitoring-services.sh\n"})}),"\n",(0,n.jsx)(t.p,{children:"Deploying the services takes some time and depends on how much bandwidth is available,\nhow the instances are equipped, etc. 90-120 minutes is not unusual when Ceph and OpenStack\nare fully deployed."}),"\n",(0,n.jsx)(t.p,{children:"In order not to prolong the deployments themselves images may optionally be pulled in advance:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sh",children:"/opt/configuration/scripts/pull-images.sh\n"})}),"\n",(0,n.jsx)(t.p,{children:"If you only want to install the monitoring services, a few dependencies must be installed first:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sh",children:"osism apply common\nosism apply loadbalancer\nosism apply opensearch\nosism apply mariadb\n"})}),"\n",(0,n.jsx)(t.p,{children:"You can then use the monitoring services without having to install a complete Openstack environment."}),"\n",(0,n.jsx)(t.p,{children:"You can install some basic OpenStack resources like public network, flavors and images by running"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sh",children:"/opt/configuration/scripts/bootstrap.sh\n"})}),"\n",(0,n.jsxs)(t.p,{children:["If you want to verify the installation with ",(0,n.jsx)(t.a,{href:"https://opendev.org/openinfra/refstack",children:"refstack"})," run"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sh",children:"/opt/configuration/scripts/check.sh\n"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"After the deployment, you can log in to the manager via SSH and jump to the nodes of the cluster"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sh",children:"make ENVIRONMENT=regiocloud login\nssh testbed-node-0\nssh testbed-<TAB><TAB>\n"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"If you want you can create a test project with a test user after login. It also\ncreates an instance with a volume attached to a network with a router."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sh",children:"osism apply --environment openstack test\n"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:"When the OSISM Testbed is no longer needed, it can be deleted."}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sh",children:"make ENVIRONMENT=regiocloud clean\n"})}),"\n",(0,n.jsx)(t.h2,{id:"configuration",children:"Configuration"}),"\n",(0,n.jsx)(t.p,{children:"This section describes how to configure and customise the OSISM Testbed."}),"\n",(0,n.jsx)(t.h3,{id:"variables",children:"Variables"}),"\n",(0,n.jsx)(t.p,{children:"The defaults for the OpenTofu variables are intended for REGIO.cloud."}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Variable"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Default"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"availability_zone"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"nova"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"ceph_version"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"quincy"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"cloud_provider"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"regiocloud"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"configuration_version"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"main"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"deploy_monitoring"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"false"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"dns_nameservers"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:'["8.8.8.8", "9.9.9.9"]'})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"enable_config_drive"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"true"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"flavor_manager"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"SCS-4V-16-50"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"flavor_node"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"SCS-8V-32-50"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"image"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"Ubuntu 22.04"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Only Ubuntu 22.04 is currently supported"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"image_node"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"Ubuntu 22.04"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Only Ubuntu 22.04 is currently supported"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"manager_version"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"latest"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"network_availability_zone"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"nova"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"number_of_nodes"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"3"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"number_of_volumes"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"3"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"openstack_version"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"2023.2"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"prefix"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"testbed"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"public"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"external"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"refstack"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"false"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"volume_availability_zone"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"nova"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"volume_size_base"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"30"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"volume_size_storage"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"10"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"volume_type"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"__DEFAULT__"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"overrides",children:"Overrides"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Name"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"manager_boot_from_image"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"manager_boot_from_volume"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"neutron_availability_zone_hints_network"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"neutron_availability_zone_hints_router"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"neutron_router_enable_snat"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"nodes_boot_from_image"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"nodes_boot_from_volume"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"nodes_use_ephemeral_storage"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"customisations",children:"Customisations"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Name"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"access_floatingip"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"access_ipv4"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"access_ipv6"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"default"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"neutron_floatingip"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:"usage-of-the-the-testbed",children:"Usage of the the Testbed"}),"\n",(0,n.jsx)(t.h3,{id:"vpn-access",children:"VPN access"}),"\n",(0,n.jsxs)(t.p,{children:["Install wireguard on your workstation, if you have not done this before. For instructions how to do\nit on your workstation, please have a look on the documentation of your used distribution. The\nwireguard documentation you will find ",(0,n.jsx)(t.a,{href:"https://www.wireguard.com",children:"here"}),"."]}),"\n",(0,n.jsx)(t.p,{children:"Start the wireguard tunnel.\n(Press CTRL+c to keep the tunnel running forever. The make target also launches a browser tab with references to all services)"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"make vpn-wireguard ENVIRONMENT=regiocloud\n"})}),"\n",(0,n.jsx)(t.p,{children:"If you want to connect to the OSISM Testbed from multiple clients, change the client IP\naddress in the downloaded configuration file to be different on each client."}),"\n",(0,n.jsxs)(t.p,{children:["Copy the ",(0,n.jsx)(t.code,{children:"/home/dragon/wireguard-client.conf"})," from the manager file to your workstation. This is necessary\nfor using the web endpoints on your workstation. Rename the wireguard config file to something\nlike ",(0,n.jsx)(t.code,{children:"wg-testbed-regiocloud.conf"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["If you do not want to use Wireguard you can also work with ",(0,n.jsx)(t.a,{href:"https://github.com/sshuttle/sshuttle",children:"sshuttle"}),"."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"make vpn-sshuttle ENVIRONMENT=regiocloud\nkillall sshuttle\n"})}),"\n",(0,n.jsxs)(t.p,{children:["If you are unable to access the following domains, you can customize your local ",(0,n.jsx)(t.code,{children:"/etc/hosts"})," with the following entries:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"# OSISM testbed Hosts\n192.168.16.5   ara.testbed.osism.xyz ara\n192.168.16.5   cgit.testbed.osism.xyz cgit\n192.168.16.5   flower.testbed.osism.xyz flower\n192.168.16.5   homer.testbed.osism.xyz homer\n192.168.16.5   netbox.testbed.osism.xyz netbox\n192.168.16.5   testbed-manager.testbed.osism.xyz testbed-manager\n192.168.16.5   nexus.testbed.osism.xyz nexus\n192.168.16.5   phpmyadmin.testbed.osism.xyz phpmyadmin\n192.168.16.9   api-int.testbed.osism.xyz api-int\n192.168.16.10  testbed-node-0.testbed.osism.xyz testbed-node-0\n192.168.16.11  testbed-node-1.testbed.osism.xyz testbed-node-1\n192.168.16.12  testbed-node-2.testbed.osism.xyz testbed-node-2\n192.168.16.13  testbed-node-3.testbed.osism.xyz testbed-node-3\n192.168.16.14  testbed-node-4.testbed.osism.xyz testbed-node-4\n192.168.16.15  testbed-node-5.testbed.osism.xyz testbed-node-5\n192.168.16.16  testbed-node-6.testbed.osism.xyz testbed-node-6\n192.168.16.17  testbed-node-7.testbed.osism.xyz testbed-node-7\n192.168.16.18  testbed-node-8.testbed.osism.xyz testbed-node-8\n192.168.16.19  testbed-node-9.testbed.osism.xyz testbed-node-9\n192.168.16.100 keycloak.testbed.osism.xyz keycloak\n192.168.16.254 api.testbed.osism.xyz api\n"})}),"\n",(0,n.jsx)(t.h3,{id:"webinterfaces",children:"Webinterfaces"}),"\n",(0,n.jsxs)(t.p,{children:["All SSL enabled services within the OSISM Testbed use certs which are signed by the self-signed\n",(0,n.jsx)(t.a,{href:"https://raw.githubusercontent.com/osism/testbed/main/environments/kolla/certificates/ca/testbed.crt",children:"OSISM Testbed CA"}),"\n(Download the file and import it as certification authority to your browser)."]}),"\n",(0,n.jsx)(t.p,{children:"If you want to access the services please choose the URL from the following table."}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Name"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"URL"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Username"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Password"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Note"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"ARA"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"https://ara.testbed.osism.xyz",children:"https://ara.testbed.osism.xyz"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"ara"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"password"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Ceph"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"https://api-int.testbed.osism.xyz:8140",children:"https://api-int.testbed.osism.xyz:8140"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"admin"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"password"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Flower"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"https://flower.testbed.osism.xyz",children:"https://flower.testbed.osism.xyz"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Grafana"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"https://api-int.testbed.osism.xyz:3000",children:"https://api-int.testbed.osism.xyz:3000"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"admin"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"password"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"HAProxy (testbed-node-0)"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"http://testbed-node-0.testbed.osism.xyz:1984",children:"http://testbed-node-0.testbed.osism.xyz:1984"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"haproxy"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"password"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"HAProxy (testbed-node-1)"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"http://testbed-node-1.testbed.osism.xyz:1984",children:"http://testbed-node-1.testbed.osism.xyz:1984"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"haproxy"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"password"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"HAProxy (testbed-node-2)"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"http://testbed-node-2.testbed.osism.xyz:1984",children:"http://testbed-node-2.testbed.osism.xyz:1984"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"haproxy"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"password"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Homer"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"https://homer.testbed.osism.xyz",children:"https://homer.testbed.osism.xyz"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Horizon (via Keycloak)"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"https://api.testbed.osism.xyz",children:"https://api.testbed.osism.xyz"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"alice"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"password"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Horizon (via Keystone)"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"https://api.testbed.osism.xyz",children:"https://api.testbed.osism.xyz"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"admin"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"password"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"domain: default"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Horizon (via Keystone)"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"https://api.testbed.osism.xyz",children:"https://api.testbed.osism.xyz"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"test"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"test"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"domain: test"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Keycloak"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"https://keycloak.testbed.osism.xyz/auth",children:"https://keycloak.testbed.osism.xyz/auth"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"admin"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"password"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Netbox"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"https://netbox.testbed.osism.xyz",children:"https://netbox.testbed.osism.xyz"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"admin"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"password"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Netdata"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"http://testbed-manager.testbed.osism.xyz:19999",children:"http://testbed-manager.testbed.osism.xyz:19999"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Nexus"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"https://nexus.testbed.osism.xyz",children:"https://nexus.testbed.osism.xyz"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"admin"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"password"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"OpenSearch Dashboards"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"https://api.testbed.osism.xyz:5601",children:"https://api.testbed.osism.xyz:5601"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"opensearch"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"password"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Prometheus"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"https://api-int.testbed.osism.xyz:9091",children:"https://api-int.testbed.osism.xyz:9091"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"RabbitMQ"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"https://api-int.testbed.osism.xyz:15672",children:"https://api-int.testbed.osism.xyz:15672"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"openstack"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"password"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"phpMyAdmin"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.a,{href:"https://phpmyadmin.testbed.osism.xyz",children:"https://phpmyadmin.testbed.osism.xyz"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"root"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"password"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"authentication-with-oidc",children:"Authentication with OIDC"}),"\n",(0,n.jsx)(t.p,{children:"Authentication with OpenID Connect (OIDC) is possible via Keycloak, which is automatically configured for the OIDC mechanism."}),"\n",(0,n.jsx)(t.h4,{id:"openstack-web-dashboard-horizon-login-via-oidc",children:"OpenStack web dashboard (Horizon) login via OIDC"}),"\n",(0,n.jsxs)(t.p,{children:["For logging in via OIDC, open your browser at OpenStack Dashboard Login Page, select ",(0,n.jsx)(t.strong,{children:"Authenticate via Keycloak"}),", after being\nredirected to the Keycloak login page, perform the login with the credentials ",(0,n.jsx)(t.strong,{children:"alice"})," and ",(0,n.jsx)(t.strong,{children:"password"}),".\nAfter that you will be redirected back to the Horizon dashboard, where you will be logged in with the user ",(0,n.jsx)(t.strong,{children:"alice"}),"."]}),"\n",(0,n.jsx)(t.h4,{id:"openstack-web-dashboard-horizon-logout",children:"OpenStack web dashboard (Horizon) logout"}),"\n",(0,n.jsxs)(t.p,{children:["Keep in mind, that clicking ",(0,n.jsx)(t.strong,{children:"Sign Out"})," on the Horizon dashboard currently doesn't revoke your OIDC token, and any consequent\nattempt to ",(0,n.jsx)(t.strong,{children:"Authenticate via Keycloak"})," will succeed without providing the credentials."]}),"\n",(0,n.jsx)(t.p,{children:"The expiration time of the Single Sign On tokens can be controlled on multiple levels in Keycloak."}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["On realm level under ",(0,n.jsx)(t.em,{children:"Realm Settings"})," > ",(0,n.jsx)(t.em,{children:"Tokens"}),".\nAssuming the ",(0,n.jsx)(t.em,{children:"keycloak_realm"})," ansible variable is the default ",(0,n.jsx)(t.em,{children:"osism"}),", and keycloak is listening on\n",(0,n.jsx)(t.a,{href:"https://keycloak.testbed.osism.xyz",children:"keycloak.testbed.osism.xyz"}),", then the configuration form is available\n",(0,n.jsx)(t.a,{href:"https://keycloak.testbed.osism.xyz/auth/admin/master/console/#/realms/osism/token-settings",children:"here"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["Detailed information is available in the Keycloak Server Administrator Documentation\n",(0,n.jsx)(t.a,{href:"https://www.keycloak.org/docs/latest/server_admin/#_timeouts",children:"Session and Token Timeouts"})," section."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["In a realm down on the ",(0,n.jsx)(t.a,{href:"https://keycloak.testbed.osism.xyz/auth/admin/master/console/#/realms/osism/clients",children:"client level"}),"\nselect the client (keystone), and under ",(0,n.jsx)(t.em,{children:"Settings"})," > ",(0,n.jsx)(t.em,{children:"Advanced Settings"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["It is recommended to keep the ",(0,n.jsx)(t.em,{children:"Access Token Lifespan"})," on a relatively low value, with the trend of blocking third party\ncookies. For further information see the Keycloak documentation's ",(0,n.jsx)(t.a,{href:"https://www.keycloak.org/docs/latest/securing_apps/#browsers-with-blocked-third-party-cookies",children:"Browsers with Blocked Third-Party Cookies"})," section."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h4,{id:"usage-of-the-openstack-cli",children:"Usage of the Openstack CLI"}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"environments/openstack"})," folder contains the needed files for the openstack client:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"cd environments/openstack\nexport OS_CLOUD=<the cloud environment>  # i.e. admin\nopenstack floating ip list\n"})}),"\n",(0,n.jsx)(t.h4,{id:"openstack-cli-operations-with-openid-connect-password",children:"OpenStack CLI operations with OpenID Connect password"}),"\n",(0,n.jsxs)(t.p,{children:["Using the OpenStack cli is also possible via OIDC, assuming you provisioned the user ",(0,n.jsx)(t.strong,{children:"alice"})," with password ",(0,n.jsx)(t.strong,{children:"password"}),",\nthen you can perform a simple ",(0,n.jsx)(t.code,{children:"project list"})," operation like this:"]}),"\n",(0,n.jsx)(t.p,{children:'See chapter "Usage the Openstack CLI" for basic openstack usage.'}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sh",children:"openstack \\\n --os-cacert /etc/ssl/certs/ca-certificates.crt \\\n --os-auth-url https://api.testbed.osism.xyz:5000/v3 \\\n --os-auth-type v3oidcpassword \\\n --os-client-id keystone \\\n --os-client-secret 0056b89c-030f-486b-a6ad-f0fa398fa4ad \\\n --os-username alice \\\n --os-password password \\\n --os-identity-provider keycloak \\\n --os-protocol openid \\\n --os-identity-api-version 3 \\\n --os-discovery-endpoint https://keycloak.testbed.osism.xyz/auth/realms/osism/.well-known/openid-configuration \\\nproject list\n"})}),"\n",(0,n.jsx)(t.h4,{id:"openstack-cli-token-issue-with-openid-connect",children:"OpenStack CLI token issue with OpenID Connect"}),"\n",(0,n.jsxs)(t.p,{children:["It is also possible to exchange your username/password to a token, for further use with the cli.\nThe ",(0,n.jsx)(t.code,{children:"token issue"})," subcommand returns an SQL table, in which the ",(0,n.jsx)(t.code,{children:"id"})," column's ",(0,n.jsx)(t.code,{children:"value"})," field contains the token:"]}),"\n",(0,n.jsx)(t.p,{children:'See chapter "Usage the Openstack CLI" for basic openstack usage.'}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sh",children:'openstack \\\n --os-cacert /etc/ssl/certs/ca-certificates.crt \\\n --os-auth-url https://api.testbed.osism.xyz:5000/v3 \\\n --os-auth-type v3oidcpassword \\\n --os-client-id keystone \\\n --os-client-secret 0056b89c-030f-486b-a6ad-f0fa398fa4ad \\\n --os-username alice \\\n --os-password password \\\n --os-identity-provider keycloak \\\n --os-protocol openid \\\n --os-identity-api-version 3 \\\n --os-discovery-endpoint https://keycloak.testbed.osism.xyz/auth/realms/osism/.well-known/openid-configuration \\\n --os-openid-scope "openid profile email" \\\ntoken issue \\\n  -c id\n  -f value\n'})}),"\n",(0,n.jsx)(t.p,{children:"An example token is like:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sh",children:"gAAAAABhC98gL8nsQWknro3JWDXWLFCG3CDr3Mi9OIlvVAZMjy2mNgYtlXv_0yAIy-\nnSlLAaLIGhht17-mwf8uclKgRuNVsYLSmgUpB163l89-ch2w2_OFe9zNSQNWf4qfd8\nCl7E7XvvUoFr1N8Gh09vaYLvRvYgCGV05xBUSs76qCHa0qElPUsk56s5ft4ALrSrzD\n4cEQRVb5PXNjywdZk9_gtJziz31A7sD4LPIy82O5N9NryDoDw\n"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"TODO: OpenStack CLI operations with token"}),"\n",(0,n.jsx)(t.li,{children:"TODO: OpenStack CLI token revoke"}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"advanced-usage",children:"Advanced Usage"}),"\n",(0,n.jsx)(t.h3,{id:"change-versions",children:"Change versions"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["Go to ",(0,n.jsx)(t.code,{children:"/opt/configuration"})," on ",(0,n.jsx)(t.code,{children:"testbed-manager"})]}),"\n",(0,n.jsxs)(t.li,{children:["Run ",(0,n.jsx)(t.code,{children:"./scripts/set-openstack-version.sh zed"})," to set the OpenStack version to ",(0,n.jsx)(t.code,{children:"zed"})]}),"\n",(0,n.jsxs)(t.li,{children:["Run ",(0,n.jsx)(t.code,{children:"./scripts/set-ceph-version.sh quincy"})," to set the Ceph version to ",(0,n.jsx)(t.code,{children:"quincy"})]}),"\n",(0,n.jsxs)(t.li,{children:["Run ",(0,n.jsx)(t.code,{children:"osism-update-manager"})," to update the manager"]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"deploy-services",children:"Deploy services"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Script"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"/opt/configuration/scripts/deploy/000-manager-service.sh"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"/opt/configuration/scripts/deploy/001-helper-services.sh"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"/opt/configuration/scripts/deploy/100-ceph-services-basic.sh"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"/opt/configuration/scripts/deploy/200-infrastructure-services-basic.sh"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"/opt/configuration/scripts/deploy/210-infrastructure-services-extended.sh"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"/opt/configuration/scripts/deploy/300-openstack-services-basic.sh"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"/opt/configuration/scripts/deploy/310-openstack-services-extended.sh"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"/opt/configuration/scripts/deploy/320-openstack-services-baremetal.sh"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"/opt/configuration/scripts/deploy/330-openstack-services-additional.sh"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"/opt/configuration/scripts/deploy/400-monitoring-services.sh"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"upgrade-services",children:"Upgrade services"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Script"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"/opt/configuration/scripts/upgrade/100-ceph-services.sh"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"/opt/configuration/scripts/upgrade/200-infrastructure-services-basic.sh"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"/opt/configuration/scripts/upgrade/300-openstack-services-basic.sh"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"/opt/configuration/scripts/upgrade/310-openstack-services-extended.sh"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"/opt/configuration/scripts/upgrade/320-openstack-services-baremetal.sh"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"/opt/configuration/scripts/upgrade/330-openstack-services-additional.sh"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,n.jsx)(t.h3,{id:"unsupported-locale-setting",children:"Unsupported locale setting"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-sh",children:"$ make prepare\nansible-playbook -i localhost, ansible/check-local-versions.yml\nERROR: Ansible could not initialize the preferred locale: unsupported locale setting\nmake: *** [prepare] Error 1\n"})}),"\n",(0,n.jsxs)(t.p,{children:["To solve the problem you have to modify the ",(0,n.jsx)(t.code,{children:"Makefile"}),". Change the 1st line as follows."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"export LC_ALL=en_US.UTF-8\n"})}),"\n",(0,n.jsxs)(t.p,{children:["To find out the locale used on the system ",(0,n.jsx)(t.code,{children:"printenv"})," can be used."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:'$ printenv | grep -i lang|locale\nLANG="en_US.UTF-8"\nLC_COLLATE="en_US.UTF-8"\nLC_CTYPE="UTF-8"\nLC_MESSAGES="en_US.UTF-8"\nLC_MONETARY="en_US.UTF-8"\nLC_NUMERIC="en_US.UTF-8"\nLC_TIME="en_US.UTF-8"\nLC_ALL=\n'})}),"\n",(0,n.jsx)(t.h2,{id:"notes",children:"Notes"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"The configuration is intentionally kept quite static. Please create no PRs to make the configuration more flexible/dynamic."}),"\n",(0,n.jsx)(t.li,{children:"The OSISM documentation uses hostnames, examples, addresses etc. from OSISM Testbed."}),"\n",(0,n.jsx)(t.li,{children:"Even if all components (storage, network, compute, control) are operated on the same nodes, there are separate networks.\nThis is because in larger productive HCI environments, dedicated control nodes and network nodes are usually provided.\nIt is also common to place storage frontend and storage backend on an independent/additional network infrastructure."}),"\n",(0,n.jsxs)(t.li,{children:["The third volume (",(0,n.jsx)(t.code,{children:"/dev/sdd"}),") is not enabled for Ceph by default. This is to test the scaling of Ceph."]}),"\n",(0,n.jsxs)(t.li,{children:["Ansible errors that have something to do with undefined variables (e.g. ",(0,n.jsx)(t.code,{children:"AnsibleUndefined"}),") are most likely due to cached\nfacts that are no longer valid. The facts can be updated by running ",(0,n.jsx)(t.code,{children:"osism apply facts"}),"."]}),"\n",(0,n.jsx)(t.li,{children:"The manager is used as pull through cache for Docker images and Ubuntu packages. This reduces the amount of traffic consumed."}),"\n",(0,n.jsxs)(t.li,{children:["To speed up the Ansible playbooks, ",(0,n.jsx)(t.a,{href:"https://ara.recordsansible.org",children:"ARA"})," can be disabled. This\nis done by executing ",(0,n.jsx)(t.code,{children:"/opt/configuration/scripts/disable-ara.sh"}),". Afterwards no more logs are available in the ARA web\ninterface."]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"appendix",children:"Appendix"}),"\n",(0,n.jsx)(t.h3,{id:"supported-releases",children:"Supported releases"}),"\n",(0,n.jsx)(t.p,{children:"The following stable Ceph and OpenStack releases are supported."}),"\n",(0,n.jsxs)(t.p,{children:["The deployment of Ceph is based on ",(0,n.jsx)(t.a,{href:"https://docs.ceph.com/ceph-ansible/",children:"ceph-ansible"}),"."]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Ceph Pacific"}),"\n",(0,n.jsxs)(t.li,{children:["Ceph Quincy (",(0,n.jsx)(t.strong,{children:"default"}),")"]}),"\n",(0,n.jsx)(t.li,{children:"Ceph Reef"}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["The deployment of OpenStack is based on ",(0,n.jsx)(t.a,{href:"https://docs.openstack.org/kolla-ansible/latest/",children:"kolla-ansible"}),"."]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"OpenStack Zed"}),"\n",(0,n.jsx)(t.li,{children:"OpenStack 2023.1"}),"\n",(0,n.jsxs)(t.li,{children:["OpenStack 2023.2 (",(0,n.jsx)(t.strong,{children:"default"}),")"]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["The deployment of Kubernetes is based on ",(0,n.jsx)(t.a,{href:"https://github.com/techno-tim/k3s-ansible",children:"k3s-ansible"}),"."]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Kubernetes v1.29"}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"included-services",children:"Included services"}),"\n",(0,n.jsx)(t.p,{children:"The following services can currently be used with this testbed without further adjustments."}),"\n",(0,n.jsx)(t.h4,{id:"infrastructure",children:"Infrastructure"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Ceph"}),"\n",(0,n.jsx)(t.li,{children:"Fluentd"}),"\n",(0,n.jsx)(t.li,{children:"Gnocchi"}),"\n",(0,n.jsx)(t.li,{children:"Grafana"}),"\n",(0,n.jsx)(t.li,{children:"Haproxy"}),"\n",(0,n.jsx)(t.li,{children:"Influxdb"}),"\n",(0,n.jsx)(t.li,{children:"Keepalived"}),"\n",(0,n.jsx)(t.li,{children:"Keycloak"}),"\n",(0,n.jsx)(t.li,{children:"Kubernetes CAPI Management Cluster"}),"\n",(0,n.jsx)(t.li,{children:"Mariadb"}),"\n",(0,n.jsx)(t.li,{children:"Memcached"}),"\n",(0,n.jsx)(t.li,{children:"Netbox"}),"\n",(0,n.jsx)(t.li,{children:"Netdata"}),"\n",(0,n.jsx)(t.li,{children:"Opensearch"}),"\n",(0,n.jsx)(t.li,{children:"Openvswitch"}),"\n",(0,n.jsx)(t.li,{children:"Patchman"}),"\n",(0,n.jsx)(t.li,{children:"Prometheus exporters"}),"\n",(0,n.jsx)(t.li,{children:"Rabbitmq"}),"\n",(0,n.jsx)(t.li,{children:"Redis"}),"\n"]}),"\n",(0,n.jsx)(t.h4,{id:"openstack",children:"OpenStack"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Barbican"}),"\n",(0,n.jsx)(t.li,{children:"Ceilometer"}),"\n",(0,n.jsx)(t.li,{children:"Cinder"}),"\n",(0,n.jsx)(t.li,{children:"Designate"}),"\n",(0,n.jsx)(t.li,{children:"Glance"}),"\n",(0,n.jsx)(t.li,{children:"Heat"}),"\n",(0,n.jsx)(t.li,{children:"Horizon"}),"\n",(0,n.jsx)(t.li,{children:"Ironic"}),"\n",(0,n.jsx)(t.li,{children:"Keystone"}),"\n",(0,n.jsx)(t.li,{children:"Magnum"}),"\n",(0,n.jsx)(t.li,{children:"Manila"}),"\n",(0,n.jsx)(t.li,{children:"Neutron"}),"\n",(0,n.jsx)(t.li,{children:"Nova (with Libvirt/KVM)"}),"\n",(0,n.jsx)(t.li,{children:"Octavia"}),"\n",(0,n.jsx)(t.li,{children:"Senlin"}),"\n",(0,n.jsx)(t.li,{children:"Skyline"}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"makefile-reference",children:"Makefile reference"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"$ make help\n\nUsage:\n  make <target>\n  help                  Display this help.\n  clean                 Destroy infrastructure with OpenTofu.\n  wipe-local-install    Wipe the software dependencies in `venv`.\n  create                Create required infrastructure with OpenTofu.\n  login                 Log in on the manager.\n  vpn-wireguard         Establish a wireguard vpn tunnel.\n  vpn-sshuttle          Establish a sshuttle vpn tunnel.\n  bootstrap             Bootstrap everything.\n  manager               Deploy only the manager service.\n  identity              Deploy only identity services.\n  ceph                  Deploy only ceph services.\n  deploy                Deploy everything and then check it.\n  prepare               Run local preperations.\n  deps                  Install software preconditions to `venv`.\n\n$ make <TAB> <TAB>\n"})}),"\n",(0,n.jsx)(t.h3,{id:"ci-jobs",children:"CI jobs"}),"\n",(0,n.jsxs)(t.p,{children:["You can inspect the ",(0,n.jsx)(t.a,{href:"https://zuul.services.betacloud.xyz/t/osism/builds?project=osism%2Ftestbed&skip=0",children:"results of the daily zuul jobs"}),"."]}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Name"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"testbed-deploy"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"testbed-deploy-ceph"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"testbed-deploy-cleura"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"testbed-deploy-pco"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"testbed-deploy-stable"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"testbed-deploy-wavestack"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"testbed-update-stable"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"testbed-upgrade"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"testbed-upgrade-ceph"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"testbed-upgrade-cleura"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"testbed-upgrade-pco"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"testbed-upgrade-stable"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"testbed-upgrade-wavestack"}),(0,n.jsx)(t.td,{style:{textAlign:"left"}})]})]})]})]})}function h(e={}){const{wrapper:t}={...(0,l.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},1151:(e,t,s)=>{s.d(t,{Z:()=>r,a:()=>d});var n=s(7294);const l={},i=n.createContext(l);function d(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);